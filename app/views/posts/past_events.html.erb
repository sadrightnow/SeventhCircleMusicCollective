<%= form_with url: past_posts_path, method: :get, class: "filter-form" do %>
  <div class="filter-container">
    <!-- Search Bar -->
    <div class="search-bar">
      <%= label_tag :search, "Search Event Name:" %>
      <%= text_field_tag :search, params[:search], placeholder: "Search by event name" %>
    </div>

    <!-- Date Range Filter -->
    <div class="date-range">
      <%= label_tag :start_date, "Start Date:" %>
      <%= date_field_tag :start_date, params[:start_date] %>

      <%= label_tag :end_date, "End Date:" %>
      <%= date_field_tag :end_date, params[:end_date] %>
    </div>

    <!-- Submit Button -->
    <%= submit_tag "Filter", class: "filter-button" %>
  </div>
<% end %>


<div class="past-events-table <%= 'logged-in' if user_signed_in? %>">
  <div class="past-events-header">
    <div class="past-event-column"><strong>#</strong></div>
    <div class="past-event-column"><strong>Date</strong></div>
    <div class="past-event-column"><strong>Event</strong></div>
    <% if user_signed_in? %>
      <div class="past-event-column actions"><strong>Actions</strong></div>
    <% end %>
  </div>

  <% @past_posts.each_with_index do |post, index| %>
    <div class="past-events-row">
      <div class="past-event-column">
        <%= @past_posts.total_count - index - ((@past_posts.current_page - 1) * @past_posts.limit_value) %>
      </div>
      <div class="past-event-column"><%= Date.parse(post.event_date).strftime('%m/%d/%Y') %></div>
      <div class="past-event-column"><%= post.event_name %></div>
      <% if user_signed_in? %>
        <div class="past-event-column actions">
          <%= button_to "Delete", post_path(post), method: :delete, data: { confirm: "Are you sure you want to delete this post?" }, class: "delete-button" %>
        </div>
      <% end %>
    </div>
  <% end %>
</div>



<!-- Pagination Links outside the table -->
<div class="pagination">
  <%= paginate @past_posts %>
</div>
